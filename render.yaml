# Render configuration for static Vite build
# Docs: https://render.com/docs/infrastructure-as-code

services:
  - type: static_site
    name: tile-catalog
    envVars:
      - key: NODE_VERSION
        value: 20
    buildCommand: npm ci && npm run build
    staticPublishPath: dist
    # Optional: custom headers for better caching + respect hashed filenames
    headers:
      - path: /assets/**
        name: Cache-Control
        value: public, max-age=31536000, immutable
      - path: /index.html
        name: Cache-Control
        value: no-cache
    routes:
      - type: redirect
        source: /index.html
        destination: /
      - type: rewrite
        source: /.*/
        destination: /index.html
