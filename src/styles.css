/**
 * Каталог плитки - Современные стили
 * Полный рефакторинг 2025 + Пагинация
 * Fixed: Исправлена сетка товаров для корректного отображения 4 колонок
 */

/* ===== CSS переменные ===== */
:root {
  /* Цвета */
  --color-primary: #f7c741;
  --color-primary-dark: #e6b000;
  --color-primary-light: #fff3d1;
  
  /* Светлая тема */
  --color-bg: #ffffff;
  --color-surface: #f8fafc;
  --color-surface-elevated: #ffffff;
  --color-text: #1e293b;
  --color-text-secondary: #64748b;
  --color-text-muted: #94a3b8;
  --color-border: #e2e8f0;
  --color-border-light: #f1f5f9;
  
  /* Состояния */
  --color-success: #10b981;
  --color-warning: #f59e0b;
  --color-error: #ef4444;
  
  /* Улучшенные тени */
  --shadow-sm: 0 1px 2px 0 rgba(15, 23, 42, 0.05);
  --shadow-md: 0 4px 6px -1px rgba(15, 23, 42, 0.1), 0 2px 4px -1px rgba(15, 23, 42, 0.06);
  --shadow-lg: 0 10px 15px -3px rgba(15, 23, 42, 0.1), 0 4px 6px -2px rgba(15, 23, 42, 0.05);
  --shadow-xl: 0 20px 25px -5px rgba(15, 23, 42, 0.1), 0 10px 10px -5px rgba(15, 23, 42, 0.04);
  --shadow-card: 0 2px 8px -2px rgba(15, 23, 42, 0.08), 0 4px 16px -4px rgba(15, 23, 42, 0.04);
  --shadow-card-hover: 0 8px 32px -8px rgba(15, 23, 42, 0.12), 0 16px 48px -12px rgba(15, 23, 42, 0.08);
  
  /* Размеры */
  --container-max-width: 1280px;
  --border-radius: 12px;
  --border-radius-sm: 8px;
  --border-radius-lg: 16px;
  
  /* Шрифты */
  --font-family-sans: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  --font-family-display: 'Poppins', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  
  /* Переходы */
  --transition-fast: 0.15s ease-out;
  --transition-normal: 0.3s ease-out;
  --transition-slow: 0.5s ease-out;
}

/* VK в модалках: компактная круглая кнопка только с иконкой */
.modal__actions a.btn[title="Написать в VK"],
.cart-actions a.btn[title="Написать в VK"] {
  padding: 0.5rem;              /* квадратная компактная */
  min-width: 40px;
  width: 40px;
  height: 40px;
  border-radius: 999px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 0;                        /* без зазора под текст */
}

/* сам SVG чуть крупнее и наследует цвет */
.modal__actions a.btn[title="Написать в VK"] .icon,
.cart-actions a.btn[title="Написать в VK"] .icon {
  width: 22px;
  height: 22px;
  color: currentColor;
}

/* на всякий случай скрыть текстовые узлы, если появятся */
.modal__actions a.btn[title="Написать в VK"] span,
.cart-actions a.btn[title="Написать в VK"] span {
  display: none;
}

/* темный/светлый фон согласован с btn-secondary */
[data-theme="dark"] .modal__actions a.btn[title="Написать в VK"],
[data-theme="dark"] .cart-actions a.btn[title="Написать в VK"] {
  background: var(--color-surface-elevated);
  border-color: var(--color-border);
}

/* hover: легкий акцент */
.modal__actions a.btn[title="Написать в VK"]:hover,
.cart-actions a.btn[title="Написать в VK"]:hover {
  background: var(--color-primary);
  border-color: var(--color-primary);
  color: #fff;
}

/* Темная тема */
[data-theme="dark"] {
  --color-bg: #0f172a;
  --color-surface: #1e293b;
  --color-surface-elevated: #334155;
  --color-text: #f1f5f9;
  --color-text-secondary: #cbd5e1;
  --color-text-muted: #94a3b8;
  --color-border: #334155;
  --color-border-light: #475569;
  --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.3);
  --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.4), 0 2px 4px -1px rgba(0, 0, 0, 0.3);
  --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.4), 0 4px 6px -2px rgba(0, 0, 0, 0.3);
  --shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.4), 0 10px 10px -5px rgba(0, 0, 0, 0.3);
  --shadow-card: 0 2px 8px -2px rgba(0, 0, 0, 0.3), 0 4px 16px -4px rgba(0, 0, 0, 0.2);
  --shadow-card-hover: 0 8px 32px -8px rgba(0, 0, 0, 0.4), 0 16px 48px -12px rgba(0, 0, 0, 0.3);
}

/* ===== Сброс стилей ===== */
*, *::before, *::after {
  box-sizing: border-box;
}

* {
  margin: 0;
  padding: 0;
}

html {
  scroll-behavior: smooth;
}

body {
  font-family: var(--font-family-sans);
  font-size: 16px;
  line-height: 1.6;
  color: var(--color-text);
  background-color: var(--color-bg);
  transition: background-color var(--transition-normal), color var(--transition-normal);
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

img, picture, video, canvas, svg {
  display: block;
  max-width: 100%;
}

input, button, textarea, select {
  font: inherit;
}

/* ===== Утилиты ===== */
.container {
  max-width: var(--container-max-width);
  margin: 0 auto;
  padding: 0 1rem;
}

.hidden {
  opacity: 0;
  pointer-events: none;
}

/* ===== PAGINATION STYLES ===== */
.pagination {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 1.5rem;
  margin-top: 2rem;
  padding-top: 2rem;
  border-top: 1px solid var(--color-border);
}

.pagination-controls {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  flex-wrap: wrap;
  justify-content: center;
}

.pagination-btn {
  background: var(--color-surface-elevated);
  border: 1px solid var(--color-border);
  color: var(--color-text);
  padding: 0.625rem 0.875rem;
  border-radius: var(--border-radius-sm);
  cursor: pointer;
  transition: all var(--transition-fast);
  font-size: 0.875rem;
  font-weight: 500;
  min-width: 44px;
  display: flex;
  align-items: center;
  justify-content: center;
  box-shadow: var(--shadow-sm);
}

.pagination-btn:hover:not(.pagination-btn--active) {
  background: var(--color-surface);
  border-color: var(--color-primary);
  transform: translateY(-1px);
  box-shadow: var(--shadow-md);
}

.pagination-btn--active {
  background: var(--color-primary);
  color: var(--color-text);
  border-color: var(--color-primary);
  box-shadow: var(--shadow-md);
  font-weight: 600;
}

.pagination-prev,
.pagination-next {
  font-weight: 500;
  padding: 0.625rem 1rem;
  background: var(--color-surface);
}

.pagination-dots {
  color: var(--color-text-muted);
  padding: 0.625rem 0.25rem;
  font-weight: 600;
}

.load-more-container {
  width: 100%;
  display: flex;
  justify-content: center;
  margin-top: 1rem;
}

.load-more-btn {
  background: linear-gradient(135deg, var(--color-primary) 0%, var(--color-primary-dark) 100%);
  color: var(--color-text);
  border: none;
  padding: 0.875rem 2rem;
  border-radius: var(--border-radius);
  cursor: pointer;
  font-size: 0.875rem;
  font-weight: 600;
  transition: all var(--transition-normal);
  box-shadow: var(--shadow-md);
  text-transform: uppercase;
  letter-spacing: 0.025em;
}

.load-more-btn:hover {
  transform: translateY(-2px);
  box-shadow: var(--shadow-lg);
  background: linear-gradient(135deg, var(--color-primary-dark) 0%, #d49b00 100%);
}

.load-more-btn:active {
  transform: translateY(0);
}

.pagination-info {
  font-size: 0.875rem;
  color: var(--color-text-secondary);
  text-align: center;
  font-weight: 500;
  opacity: 0.8;
}

/* ===== Ленивая загрузка изображений ===== */
.product-image {
  background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
  display: flex;
  align-items: center;
  justify-content: center;
  overflow: hidden;
  border-bottom: 1px solid var(--color-border);
  position: relative;
  border-radius: var(--border-radius) var(--border-radius) 0 0;
  aspect-ratio: 1 / 1;
}

.lazy-image {
  width: 100%;
  height: 100%;
  object-fit: cover;
  object-position: center;
  transition: opacity 0.3s ease, transform var(--transition-normal);
  opacity: 0;
}

.lazy-image.loaded {
  opacity: 1;
}

.product-card:hover .lazy-image {
  transform: scale(1.02);
}

.image-placeholder {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  background: linear-gradient(45deg, #f1f5f9, #e2e8f0);
  color: var(--color-text-muted);
  font-size: 3rem;
  opacity: 0.5;
  transition: opacity 0.3s ease;
}

.product-card__image.image-loaded .image-placeholder {
  opacity: 0;
  pointer-events: none;
}

.product-card__image.image-error .image-placeholder {
  background: linear-gradient(45deg, #fef2f2, #fee2e2);
  color: var(--color-error);
}

/* ===== Экран загрузки ===== */
.loading-screen { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: var(--color-bg); display: flex; align-items: center; justify-content: center; z-index: 9999; transition: opacity var(--transition-normal); }
.loading-content { text-align: center; }
.loading-logo { font-size: 4rem; margin-bottom: 1rem; animation: bounce 1s infinite; }
.loading-text { font-size: 1.125rem; font-weight: 500; color: var(--color-text-secondary); margin-bottom: 2rem; }
.loading-spinner { width: 40px; height: 40px; border: 3px solid var(--color-border); border-top-color: var(--color-primary); border-radius: 50%; animation: spin 1s linear infinite; margin: 0 auto; }
@keyframes bounce { 0%,20%,53%,80%,100%{transform:translateY(0)} 40%,43%{transform:translateY(-20px)} 70%{transform:translateY(-10px)} 90%{transform:translateY(-4px)} }
@keyframes spin { to{transform:rotate(360deg)} }
.loading-screen.loaded { opacity: 0; pointer-events: none; }

/* ===== Экран ошибки ===== */
.error-overlay {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: var(--color-bg);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 9999;
  transition: opacity var(--transition-normal);
}

.error-content {
  text-align: center;
  max-width: 400px;
  padding: 2rem;
  background: var(--color-surface-elevated);
  border: 1px solid var(--color-border);
  border-radius: var(--border-radius);
  box-shadow: var(--shadow-lg);
}

.error-icon {
  font-size: 4rem;
  margin-bottom: 1rem;
  animation: pulse 2s infinite;
}

.error-content h3 {
  font-family: var(--font-family-display);
  font-size: 1.3rem;
  font-weight: 600;
  color: var(--color-text);
  margin-bottom: 0.8rem;
}

.error-content p {
  color: var(--color-text-secondary);
  font-size: 0.95rem;
  line-height: 1.5;
  margin-bottom: 1.5rem;
}

@keyframes pulse {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.5; }
}

/* ===== Шапка ===== */
.header { background: var(--color-surface-elevated); border-bottom: 1px solid var(--color-border); box-shadow: var(--shadow-sm); position: sticky; top: 0; z-index: 100; transition: all var(--transition-normal); }
.header-content { display: flex; align-items: center; justify-content: space-between; padding: 1rem 0; }
.brand { display: flex; align-items: center; gap: 1rem; }
.logo { flex-shrink: 0; transition: transform var(--transition-fast); }
.logo:hover { transform: scale(1.05); }
.brand-info h1 { font-family: var(--font-family-display); font-size: 1.5rem; font-weight: 700; color: var(--color-text); line-height: 1.2; }
.brand-tagline { font-size: 0.875rem; color: var(--color-text-secondary); margin-top: 0.25rem; }
.header-actions { display: flex; align-items: center; gap: 0.5rem; }
.action-btn { display: flex; align-items: center; justify-content: center; width: 44px; height: 44px; border: 1px solid var(--color-border); border-radius: var(--border-radius-sm); background: var(--color-surface); color: var(--color-text); text-decoration: none; transition: all var(--transition-fast); cursor: pointer; }
.action-btn:hover { background: var(--color-primary); color: var(--color-text); transform: translateY(-2px); box-shadow: var(--shadow-md); }
.action-btn .icon { font-size: 1.125rem; }

/* ===== Основной контент ===== */
.main { padding: 1.5rem 0; }
.catalog-layout { display: grid; grid-template-columns: 280px 1fr; gap: 1.5rem; align-items: start; }

/* ===== Боковая панель фильтров ===== */
.filters-sidebar { position: sticky; top: 120px; }

/* Mobile filters button */
.filters-toggle{display:none}
.filters-toggle + .filters-toggle-chip{
  display:inline-flex;
  align-items:center;
  gap:.5rem;
  padding:.75rem 1rem;
  border:1px solid var(--color-border);
  border-radius:var(--border-radius-sm);
  background:var(--color-surface);
  color:var(--color-text);
  line-height:1;
  height:auto;
  cursor:pointer;
  transition:all var(--transition-fast);
  font-weight:500;
  font-size:0.9rem;
  width:100%;
  justify-content:center;
}
.filters-toggle + .filters-toggle-chip:hover{
  background:var(--color-border-light);
  transform:translateY(-1px);
}
.filters-toggle + .filters-toggle-chip:active{transform:translateY(0px)}
.filters-toggle:focus-visible + .filters-toggle-chip{
  outline:none;
  box-shadow:0 0 0 3px rgba(247,199,65,.25)
}
.filters-toggle:checked + .filters-toggle-chip{
  background:var(--color-primary);
  color:var(--color-text);
  border-color:var(--color-primary);
  box-shadow:var(--shadow-sm);
}
.visually-hidden{position:absolute!important;width:1px;height:1px;margin:-1px;padding:0;border:0;clip:rect(0 0 0 0);clip-path:inset(50%);overflow:hidden}
.filters-toggle + .filters-toggle-chip .filters-chevron{
  transition:transform var(--transition-fast);
  flex-shrink:0;
}
.filters-toggle:checked + .filters-toggle-chip .filters-chevron{transform:rotate(180deg)}

/* Hide/show elements based on viewport */
@media (min-width: 769px){ 
  .filters-toggle + .filters-toggle-chip{display:none} 
  #filters-collapsible{display:none!important} 
  .products-toolbar{display:none!important}
}
@media (max-width: 768px) { 
  #filters-sidebar{display:none} 
  .products-toolbar{display:block!important}
}

.filters-collapsible{display:none;overflow:hidden;transition:max-height var(--transition-normal),opacity var(--transition-normal)}
.filters-collapsible.open{display:block}
.filters-collapsible .filters-panel{margin-top:.5rem}

.filters-panel{background:var(--color-surface-elevated);border:1px solid var(--color-border);border-radius:var(--border-radius);box-shadow:var(--shadow-sm);overflow:hidden}
.filters-header{display:flex;align-items:center;justify-content:space-between;padding:1rem;border-bottom:1px solid var(--color-border)}
.filters-header h2{font-family:var(--font-family-display);font-size:1rem;font-weight:600;color:var(--color-text)}
.clear-btn{background:none;border:none;color:var(--color-primary);font-size:.8rem;font-weight:500;cursor:pointer;padding:.4rem .6rem;border-radius:var(--border-radius-sm);transition:all var(--transition-fast)}
.clear-btn:hover{background:var(--color-primary-light)}
.filters-content{padding:1rem;display:flex;flex-direction:column;gap:1rem}
.filter-group{display:flex;flex-direction:column;gap:.6rem}
.filter-label{font-weight:600;font-size:.8rem;color:var(--color-text);text-transform:uppercase;letter-spacing:.05em}

.search-input{width:100%;padding:.6rem .8rem;border:1px solid var(--color-border);border-radius:var(--border-radius-sm);background:var(--color-surface);color:var(--color-text);font-size:.85rem;transition:all var(--transition-fast)}
.search-input:focus{outline:none;border-color:var(--color-primary);box-shadow:0 0 0 3px rgba(247,199,65,.1)}

.checkbox-group{display:flex;flex-direction:column;gap:.4rem;max-height:120px;overflow-y:auto;scrollbar-width:thin;scrollbar-color:color-mix(in oklab, var(--color-primary) 35%, transparent) transparent}
.checkbox-group::-webkit-scrollbar{width:8px}
.checkbox-group::-webkit-scrollbar-track{background:transparent}
.checkbox-group::-webkit-scrollbar-thumb{background:color-mix(in oklab, var(--color-primary) 35%, transparent);border-radius:8px}
.checkbox-group::-webkit-scrollbar-thumb:hover{background:color-mix(in oklab, var(--color-primary) 55%, transparent)}

.checkbox-label {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  padding: 0.25rem 0;
  cursor: pointer;
  font-size: 0.875rem;
  transition: color var(--transition-fast);
}

.checkbox-label:hover {
  color: var(--color-primary-dark);
}

.filter-checkbox {
  width: 16px;
  height: 16px;
  accent-color: var(--color-primary);
  cursor: pointer;
}

.checkbox-text {
  font-size: 0.8rem;
  line-height: 1.4;
}

.more-filters-hint {
  font-size: 0.75rem;
  color: var(--color-text-muted);
  font-style: italic;
  margin-top: 0.5rem;
  text-align: center;
  opacity: 0.7;
}

.checkbox-item{display:flex;align-items:center;gap:.6rem;padding:.3rem 0;cursor:pointer;transition:color var(--transition-fast)}
.checkbox-item:hover{color:var(--color-primary-dark)}
.checkbox-item input[type="checkbox"]{appearance:none;width:18px;height:18px;display:inline-grid;place-items:center;border:1.5px solid var(--color-border);border-radius:6px;background:var(--color-surface);transition:all var(--transition-fast);cursor:pointer}
.checkbox-item input[type="checkbox"]:hover{border-color:var(--color-primary);box-shadow:0 0 0 2px rgba(247,199,65,.12)}
.checkbox-item input[type="checkbox"]:checked{border-color:var(--color-primary);background:var(--color-primary)}
.checkbox-item input[type="checkbox"]:checked::after{content:'';width:10px;height:10px;mask:radial-gradient(circle at 50% 50%, black 99%, transparent 100%);background:var(--color-text);border-radius:3px}

.price-filter{display:flex;flex-direction:column;gap:.8rem}
.price-inputs{display:grid;grid-template-columns:1fr auto 1fr;gap:.6rem;align-items:center}
.price-input{padding:.4rem .6rem;border:1px solid var(--color-border);border-radius:var(--border-radius-sm);background:var(--color-surface);color:var(--color-text);font-size:.8rem;text-align:center;transition:all var(--transition-fast);min-width:60px}
.price-input:focus{outline:none;border-color:var(--color-primary);box-shadow:0 0 0 2px rgba(247,199,65,.1)}
.price-input:invalid{border-color:var(--color-error)}
.price-separator{color:var(--color-text-muted);font-weight:500;font-size:.8rem}
.price-slider{width:100%;height:5px;background:var(--color-border);border-radius:3px;outline:none;accent-color:var(--color-primary);cursor:pointer;transition:opacity var(--transition-fast)}
.price-slider::-webkit-slider-thumb{appearance:none;width:18px;height:18px;border-radius:50%;background:var(--color-primary);border:2px solid color-mix(in oklab, var(--color-primary) 70%, #0000);box-shadow:0 2px 6px rgba(0,0,0,.2)}
.price-slider::-moz-range-thumb{width:18px;height:18px;border-radius:50%;background:var(--color-primary);border:2px solid color-mix(in oklab, var(--color-primary) 70%, #0000);box-shadow:0 2px 6px rgba(0,0,0,.2)}
.price-slider::-webkit-slider-thumb:hover{filter:brightness(1.05)}
.price-slider::-moz-range-thumb:hover{filter:brightness(1.05)}
.price-slider:hover{opacity:.8}

.products-area{display:flex;flex-direction:column;gap:1.25rem}
.results-inline{display:flex;justify-content:flex-end;padding:.25rem 0}
.results-inline .results-info{opacity:.6;font-size:.9rem}
.products-toolbar{display:none;grid-template-columns:1fr;align-items:center;gap:.75rem;padding:1rem;background:var(--color-surface-elevated);border:1px solid var(--color-border);border-radius:var(--border-radius);box-shadow:var(--shadow-sm);margin-bottom:0.5rem}
.results-info{font-weight:500;color:var(--color-text);font-size:.9rem;opacity:.65}
.controls-box{display:flex;align-items:center;gap:1rem;padding:.5rem .75rem;background:var(--color-surface-elevated);border:1px solid var(--color-border);border-radius:var(--border-radius);justify-content:space-between;margin-top:8px}
.sort-control{display:flex;align-items:center;gap:.6rem}
.sort-label{font-size:.8rem;color:var(--color-text-secondary);white-space:nowrap}
.sort-select{height:36px;padding:0 1.8rem 0 .6rem;border:1px solid var(--color-border);border-radius:var(--border-radius-sm);background:var(--color-surface);color:var(--color-text);font-size:.8rem;cursor:pointer;appearance:none;background-image:url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3e%3cpolyline points='6,9 12,15 18,9'%3e%3c/polyline%3e%3c/svg%3e");background-repeat:no-repeat;background-position:right .6rem center;background-size:14px;transition:all var(--transition-fast)}
.sort-select:focus{outline:none;border-color:var(--color-primary);box-shadow:0 0 0 2px rgba(247,199,65,.1)}

.products-grid{display:grid;gap:1.5rem;padding:.5rem 0;justify-items:stretch;align-items:stretch;grid-auto-rows:1fr}
.product-card{background:var(--color-surface-elevated);border:1px solid var(--color-border);border-radius:var(--border-radius);overflow:hidden;transition:all var(--transition-normal);cursor:pointer;position:relative;display:flex;flex-direction:column;height:auto;box-shadow:var(--shadow-card);animation:fadeInUp .6s ease-out forwards;opacity:0;transform:translateY(20px)}
.product-card:hover{transform:translateY(-4px);border-color:var(--color-primary);box-shadow:var(--shadow-card-hover),0 0 0 1px rgba(247,199,65,.1)}
.product-card:nth-child(1){animation-delay:.1s}.product-card:nth-child(2){animation-delay:.2s}.product-card:nth-child(3){animation-delay:.3s}.product-card:nth-child(4){animation-delay:.4s}
@keyframes fadeInUp{to{opacity:1;transform:translateY(0)}}
.product-image{background:linear-gradient(135deg,#f8fafc 0%,#e2e8f0 100%);display:flex;align-items:center;justify-content:center;overflow:hidden;border-bottom:1px solid var(--color-border);position:relative;border-radius:var(--border-radius) var(--border-radius) 0 0;aspect-ratio:1 / 1}
.product-image img{width:100%;height:100%;object-fit:cover;object-position:center;transition:transform var(--transition-normal)}
.product-card:hover .product-image img{transform:scale(1.02)}
.product-placeholder{font-size:3rem;opacity:.3;color:var(--color-text-muted);display:flex;align-items:center;justify-content:center;width:100%;height:100%;background:linear-gradient(45deg,#f1f5f9,#e2e8f0);border-radius:var(--border-radius-sm)}
.product-info{padding:1rem;display:flex;flex-direction:column;gap:.5rem;flex-grow:1}
.product-name{font-family:var(--font-family-display);font-size:1rem;font-weight:600;line-height:1.3;color:var(--color-text);transition:color var(--transition-fast)}
.product-card:hover .product-name{color:var(--color-primary-dark)}
.product-brand{font-size:.85rem;font-weight:500;color:var(--color-text-secondary);text-transform:uppercase;letter-spacing:.03em}
.product-color{font-size:.8rem;color:var(--color-text-muted)}
.product-price{font-family:var(--font-family-display);font-size:1.2rem;font-weight:700;color:var(--color-primary);margin-top:auto}
.product-status{margin-top:.5rem}
.status-badge{padding:.25rem .5rem;border-radius:15px;font-size:.7rem;font-weight:600;line-height:1;text-transform:uppercase;letter-spacing:.05em}
.status-in-stock{background:rgba(16,185,129,.1);color:var(--color-success)}
.status-on-demand{background:rgba(245,158,11,.1);color:var(--color-warning)}

.no-results{display:flex;align-items:center;justify-content:center;padding:3rem 1.5rem;text-align:center}
.no-results-content{max-width:350px}
.no-results-icon{font-size:3rem;margin-bottom:.8rem;opacity:.5}
.no-results h3{font-family:var(--font-family-display);font-size:1.3rem;font-weight:600;color:var(--color-text);margin-bottom:.4rem}
.no-results p{color:var(--color-text-secondary);font-size:.9rem}

.footer{background:var(--color-surface);border-top:1px solid var(--color-border);padding:1.5rem 0;margin-top:3rem}
.footer-content{display:flex;justify-content:space-between;align-items:center;gap:1.5rem}
.footer-info{font-size:.8rem;color:var(--color-text-secondary);line-height:1.5}
.footer-info p{margin-bottom:.4rem}
.footer-info a{color:var(--color-primary-dark);text-decoration:none;transition:color var(--transition-fast)}
.footer-info a:hover{color:var(--color-primary)}
.footer-links a{color:var(--color-primary-dark);text-decoration:none;font-weight:500;font-size:.85rem;transition:color var(--transition-fast)}
.footer-links a:hover{color:var(--color-primary)}

/* ===== Responsive Grid System ===== */
@media (max-width:1024px){.catalog-layout{grid-template-columns:250px 1fr;gap:1.25rem}.products-grid{gap:1.25rem}.container{padding:0 1.25rem}}
@media (max-width:768px){
  .main{padding:1rem 0}
  .header-content{padding:.75rem 0}
  .brand-tagline{display:none}
  .catalog-layout{grid-template-columns:1fr;gap:1rem}
  .filters-sidebar{position:static;order:-1}
  .products-grid{gap:1rem}
  .product-card{height:auto}
  .controls-box{flex-wrap:wrap;gap:0.75rem}
  .sort-control{min-width:140px;flex:1}
  .view-controls{margin-left:auto}
  .results-info{width:100%;text-align:center;margin-top:0.5rem;font-size:0.85rem}
  
  /* Pagination mobile */
  .pagination-controls {
    gap: 0.25rem;
  }
  
  .pagination-btn {
    padding: 0.5rem 0.625rem;
    min-width: 36px;
    font-size: 0.8rem;
  }
  
  .pagination-prev,
  .pagination-next {
    padding: 0.5rem 0.75rem;
    font-size: 0.75rem;
  }
  
  .load-more-btn {
    width: 100%;
    margin-top: 1rem;
    padding: 0.875rem 1rem;
    font-size: 0.8rem;
  }
}
@media (max-width:480px){
  .container{padding:0 .75rem}
  .products-grid{grid-template-columns:1fr;gap:.75rem}
  .product-card{height:auto}
  .controls-box{flex-direction:column;gap:0.75rem}
  .sort-control{min-width:auto}
  .view-controls{margin:0 auto}
  .results-info{margin-top:0}
  
  /* Pagination extra small */
  .pagination-btn {
    padding: 0.45rem 0.5rem;
    min-width: 32px;
    font-size: 0.75rem;
  }
  
  .pagination-info {
    font-size: 0.75rem;
    line-height: 1.4;
  }
}

.view-controls{display:flex;align-items:center;gap:.8rem}
.view-label{font-size:.8rem;color:var(--color-text-secondary);white-space:nowrap}
.view-buttons{display:flex;gap:.25rem;background:var(--color-surface);border:1px solid var(--color-border);border-radius:var(--border-radius-sm);padding:.25rem}
.view-btn{display:flex;align-items:center;justify-content:center;width:32px;height:32px;border:none;background:transparent;border-radius:var(--border-radius-sm);cursor:pointer;transition:all var(--transition-fast);color:var(--color-text-secondary);font-size:.7rem;font-weight:600}
.view-btn:hover{background:var(--color-border-light);color:var(--color-text)}
.view-btn.active{background:var(--color-primary);color:var(--color-text);box-shadow:var(--shadow-sm)}
.view-digit{letter-spacing:-2px;line-height:1}
.view-digit--mobile{display:inline}
.view-digit--desktop{display:none}
@media (min-width: 1024px) {
  .view-digit--mobile{display:none}
  .view-digit--desktop{display:inline}
}

/* ===== FIXED: Правильная сетка товаров ===== */
/* Базовые настройки сетки */
.products-grid.grid-1 { grid-template-columns: 1fr; }
.products-grid.grid-2 { grid-template-columns: 1fr 1fr; }

/* Десктопная версия - grid-1 = 4 колонки, grid-2 = 5 колонок */
@media (min-width: 1024px) {
  .products-grid.grid-1 { grid-template-columns: repeat(4, minmax(0, 1fr)); }
  .products-grid.grid-2 { grid-template-columns: repeat(5, minmax(0, 1fr)); }
}

/* Планшетная версия */
@media (max-width: 1023px) and (min-width: 769px) {
  .products-grid.grid-1 { grid-template-columns: repeat(3, minmax(0, 1fr)); }
  .products-grid.grid-2 { grid-template-columns: repeat(4, minmax(0, 1fr)); }
}

/* Мобильная версия */
@media (max-width: 768px) {
  .filters-toggle-chip{justify-self:stretch}
  .view-controls{justify-content:center}
  .products-grid.grid-1 { grid-template-columns: 1fr; }
  .products-grid.grid-2 { grid-template-columns: 1fr 1fr; }
}

@media (max-width:480px){.view-buttons{gap:.5rem;padding:.5rem}.view-btn{width:36px;height:36px}}
.logo-circle{width:48px;height:48px;border-radius:50%;background:#f7c741;display:grid;place-items:center;overflow:hidden}
.logo-circle img{width:100%;height:100%;object-fit:contain}
.action-btn .icon-vk{width:26px;height:26px;display:block}

/* ===== Product Modal ===== */
.modal{position:fixed;inset:0;z-index:1000;display:none}
.modal.open{display:block}
.modal--open { display: flex; }
.modal__backdrop{position:absolute;inset:0;background:rgba(0,0,0,.45);backdrop-filter:blur(2px)}
.modal__dialog{position:relative;margin:4vh auto;width:min(1180px,96vw);height:min(92vh,940px);background:var(--color-surface-elevated);border:1px solid var(--color-border);border-radius:var(--border-radius-lg);box-shadow:var(--shadow-xl);overflow:hidden;display:flex;flex-direction:column}
.modal__close{position:absolute;top:.75rem;right:.75rem;width:40px;height:40px;border:1px solid var(--color-border);border-radius:10px;background:var(--color-surface);color:var(--color-text);cursor:pointer;z-index:2;transition:background .15s,transform .15s}
.modal__close:hover{background:var(--color-border-light);transform:translateY(-1px)}
.modal__content{flex:1;display:grid;grid-template-columns:58% 42%;height:100%}
.modal__media{background:linear-gradient(135deg,#f8fafc 0%,#e2e8f0 100%);border-right:1px solid var(--color-border)}
.modal__image-wrap{position:relative;width:100%;height:100%;display:grid;place-items:center}
.modal__image-wrap img{width:100%;height:100%;object-fit:cover;display:none}
.modal__placeholder{font-size:4rem;opacity:.3;color:var(--color-text-muted);display:none}
.modal__details{padding:1.25rem 1.25rem 1.5rem;display:flex;flex-direction:column;gap:1rem;overflow:auto}
.modal__title{font-family:var(--font-family-display);font-size:1.4rem;line-height:1.2}
.modal__price-row{display:flex;align-items:center;justify-content:space-between;gap:1rem}
.modal__price{font-family:var(--font-family-display);font-size:1.6rem;font-weight:700;color:var(--color-primary)}
.modal__badges{display:flex;gap:.4rem}
.modal__badges .status-badge{padding:.35rem .6rem;border-radius:999px;font-size:.7rem;font-weight:700}
.modal__meta{display:grid;grid-template-columns:1fr 1fr;gap:.5rem 1rem}
.modal__meta .meta-item{font-size:.9rem;color:var(--color-text-secondary)}
.modal__meta .meta-item span{opacity:.8;margin-right:.25rem}
.modal__desc{font-size:.95rem;color:var(--color-text);line-height:1.5}
.modal__actions{margin-top:auto;display:flex;gap:.6rem}
.btn{padding:.7rem 1rem;border-radius:var(--border-radius-sm);border:1px solid var(--color-border);background:var(--color-surface);color:var(--color-text);cursor:pointer;transition:.15s;text-decoration:none;display:inline-flex;align-items:center;justify-content:center}
.btn:hover{background:var(--color-border-light)}
.btn-primary{background:linear-gradient(135deg,var(--color-primary) 0%,var(--color-primary-dark) 100%);border:none;color:var(--color-text);box-shadow:0 2px 8px rgba(247,199,65,.2)}
.btn-primary:hover{transform:translateY(-1px);box-shadow:0 4px 16px rgba(247,199,65,.3)}
.btn-secondary{background:var(--color-surface);border:1px solid var(--color-border);color:var(--color-text)}
@media (max-width:960px){.modal__dialog{height:94vh;margin:2vh auto}.modal__content{grid-template-columns:1fr;grid-template-rows:48% 52%}.modal__media{border-right:0;border-bottom:1px solid var(--color-border)}}

/* ===== Modal Content Elements ===== */
.modal-image-container {
  width: 100%;
  height: 250px;
  background: var(--color-surface);
  border-radius: var(--border-radius);
  overflow: hidden;
  position: relative;
  margin-bottom: 1.5rem;
}

.modal-image {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.modal-image-placeholder {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  color: var(--color-text-muted);
  font-size: 4rem;
}

.modal-title {
  font-size: 1.5rem;
  font-weight: 700;
  color: var(--color-text);
  margin-bottom: 0.5rem;
}

.modal-brand {
  font-size: 1rem;
  font-weight: 500;
  color: var(--color-primary);
  margin-bottom: 1rem;
}

.modal-details {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
  gap: 1rem;
  margin-bottom: 1rem;
}

.modal-detail {
  padding: 0.75rem;
  background: var(--color-surface);
  border-radius: var(--border-radius-sm);
}

.modal-detail-label {
  font-size: 0.75rem;
  font-weight: 500;
  color: var(--color-text-secondary);
  text-transform: uppercase;
  margin-bottom: 0.25rem;
}

.modal-detail-value {
  font-size: 0.875rem;
  color: var(--color-text);
}

.modal-badges {
  display: flex;
  gap: 0.5rem;
  flex-wrap: wrap;
  margin-bottom: 1rem;
}

.badge {
  padding: 0.25rem 0.75rem;
  border-radius: 9999px;
  font-size: 0.75rem;
  font-weight: 500;
}

.badge-info {
  background: rgba(59, 130, 246, 0.1);
  color: #3b82f6;
}

.badge-secondary {
  background: rgba(107, 114, 128, 0.1);
  color: var(--color-text-secondary);
}

.badge-outline {
  border: 1px solid var(--color-border);
  color: var(--color-text-secondary);
}

.modal-description {
  font-size: 0.875rem;
  color: var(--color-text-secondary);
  line-height: 1.6;
  margin-bottom: 1.5rem;
}

.modal__footer {
  padding: 0 1.5rem 1.5rem;
  display: flex;
  justify-content: flex-end;
  gap: 1rem;
}

.modal-price {
  font-size: 1.5rem;
  font-weight: 700;
  color: var(--color-text);
  margin-right: auto;
}

/* ===== Общие стили ===== */
body.modal-open {
  overflow: hidden;
}

/* Улучшения для доступности */
.product-card:focus-within {
  outline: 2px solid var(--color-primary);
  outline-offset: 2px;
}

button:focus,
input:focus,
select:focus {
  outline: 2px solid var(--color-primary);
  outline-offset: 2px;
}

/* Улучшенные скроллбары */
::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

::-webkit-scrollbar-track {
  background: var(--color-surface);
}

::-webkit-scrollbar-thumb {
  background: var(--color-border);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: var(--color-text-muted);
}

/* ===== Дополнительные стили для карточек ===== */
.product-card__collection {
  font-size: 0.75rem;
  color: var(--color-text-secondary);
  font-style: italic;
  margin-bottom: 0.25rem;
  opacity: 0.8;
}

.product-card__size {
  font-size: 0.75rem;
  color: var(--color-text-muted);
  font-weight: 500;
  background: rgba(0, 0, 0, 0.05);
  padding: 0.125rem 0.375rem;
  border-radius: 4px;
  display: inline-block;
  margin-top: 0.25rem;
}

/* Dark theme for size badges */
[data-theme="dark"] .product-card__size {
  background: rgba(255, 255, 255, 0.1);
}
/* Add-to-cart: compact size fix */
:root {
  --cart-btn-height: 44px;
  --cart-btn-font: 14px;
  --cart-btn-pad-x: 16px;
  --cart-btn-radius: 12px;
  --cart-icon-size: 18px;
}

/* Базовые размеры и выравнивание */
.product-card .btn-cart,
.product-card button[data-role="add-to-cart"],
button.cart-btn,
button.add-to-cart {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  height: var(--cart-btn-height);
  padding: 0 var(--cart-btn-pad-x);
  font-size: var(--cart-btn-font);
  line-height: 1;
  border-radius: var(--cart-btn-radius);
  /* Сохраняем ваш градиент/цвета; раскомментируйте, если нужно жестко зафиксировать */
  /* background: linear-gradient(180deg, #FFC935 0%, #E6A60C 100%); */
  /* color: #1A1F2A; */
}

/* Размеры иконки внутри кнопки */
.product-card .btn-cart svg,
.product-card .btn-cart img.icon,
button.cart-btn svg,
button.add-to-cart svg {
  width: var(--cart-icon-size);
  height: var(--cart-icon-size);
  flex: 0 0 var(--cart-icon-size);
}

/* Небольшой акцент на ховере/нажатии */
.product-card .btn-cart:hover,
button.cart-btn:hover,
button.add-to-cart:hover {
  transform: translateY(-1px);
}

.product-card .btn-cart:active,
button.cart-btn:active,
button.add-to-cart:active {
  transform: translateY(0);
}

/* Мобильная настройка */
@media (max-width: 480px) {
  :root {
    --cart-btn-height: 40px;
    --cart-btn-font: 13px;
    --cart-btn-pad-x: 14px;
    --cart-icon-size: 16px;
  }
}
