/* Mobile filters: final isolation */
@media (max-width: 768px){
  /* desktop sidebar hidden on mobile */
  #filters-sidebar{display:none!important}
  /* show mobile toolbar */
  .products-toolbar{display:grid!important}
}
@media (min-width: 769px){
  /* mobile collapsible hidden on desktop */
  #filters-collapsible{display:none!important}
  /* mobile toolbar hidden on desktop */
  .products-toolbar{display:none!important}
}

/* Collapsible animation */
#filters-collapsible{
  overflow:hidden;
  max-height:0;
  opacity:0;
  transition:max-height .28s ease,opacity .2s ease;
  background: var(--color-surface-elevated);
  border: 1px solid var(--color-border);
  border-radius: var(--border-radius);
  margin-bottom: 1rem;
}
#filters-collapsible.open{
  max-height:800px;
  opacity:1;
}

/* Mobile toolbar improvements */
@media (max-width: 768px){
  .products-toolbar{
    padding: 1rem;
    margin-bottom: 0.5rem;
  }
  
  .filters-toggle-chip{
    width: 100%;
    justify-content: center;
    padding: 0.75rem 1rem;
    font-weight: 500;
    font-size: 0.9rem;
  }
  
  .controls-box{
    margin-top: 0.5rem;
    padding: 0.75rem 1rem;
    flex-wrap: wrap;
    gap: 0.75rem;
  }
  
  .sort-control{
    min-width: 180px;
    flex: 1;
  }
  
  .sort-select{
    min-width: 140px;
    flex: 1;
  }
  
  .view-controls{
    margin-left: auto;
  }
  
  .results-info{
    width: 100%;
    text-align: center;
    margin-top: 0.5rem;
    font-size: 0.85rem;
  }
}

/* Better mobile header */
@media (max-width: 480px){
  .header-content{
    padding: 0.5rem 0;
  }
  
  .brand-info h1{
    font-size: 1.25rem;
  }
  
  .action-btn{
    width: 40px;
    height: 40px;
  }
  
  .controls-box{
    flex-direction: column;
    gap: 0.75rem;
  }
  
  .sort-control{
    min-width: auto;
  }
  
  .view-controls{
    margin: 0 auto;
  }
  
  .results-info{
    margin-top: 0;
  }
}

/* Theme toggle improvements for mobile */
@media (max-width: 768px){
  [data-theme="dark"] .filters-toggle-chip{
    background: var(--color-surface);
    border-color: var(--color-border);
    color: var(--color-text);
  }
  
  [data-theme="dark"] .filters-toggle:checked + .filters-toggle-chip{
    background: var(--color-primary);
    border-color: var(--color-primary);
    color: var(--color-text);
  }
  
  [data-theme="dark"] #filters-collapsible{
    background: var(--color-surface-elevated);
    border-color: var(--color-border);
  }
}

/* Improved grid for very small screens */
@media (max-width: 360px){
  .container{
    padding: 0 0.5rem;
  }
  
  .products-grid{
    gap: 0.5rem;
  }
  
  .product-info{
    padding: 0.75rem;
  }
}