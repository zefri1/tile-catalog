/**
 * Исправление проблемы со скроллом фильтров
 * Smooth rounded scroll for filters
 */

/* Контейнер боковой панели — скролл всей колонки, без обрезания скруглений */
.filters-sidebar{position:sticky;top:120px;max-height:calc(100vh - 140px);overflow-y:auto;overflow-x:hidden;scrollbar-width:thin;scrollbar-color:var(--color-border) transparent}
.filters-sidebar::-webkit-scrollbar{width:6px}
.filters-sidebar::-webkit-scrollbar-track{background:transparent}
.filters-sidebar::-webkit-scrollbar-thumb{background:var(--color-border);border-radius:3px}
.filters-sidebar::-webkit-scrollbar-thumb:hover{background:var(--color-text-muted)}

/* Панель фильтров сохраняет скругления; ничего не обрезаем */
.filters-panel{background:var(--color-surface-elevated);border:1px solid var(--color-border);border-radius:var(--border-radius);box-shadow:var(--shadow-sm);overflow:visible}
.filters-header{display:flex;align-items:center;justify-content:space-between;padding:1rem;border-bottom:1px solid var(--color-border);border-top-left-radius:var(--border-radius);border-top-right-radius:var(--border-radius);overflow:visible}
.filters-content{padding:1rem;display:flex;flex-direction:column;gap:1rem;max-height:none;overflow:visible}

/* Внутренние списки с прокруткой — маска сверху/снизу, чтобы края были «ровные» и не квадратные */
.checkbox-group{display:flex;flex-direction:column;gap:.4rem;max-height:160px;overflow:auto;scrollbar-width:thin;scrollbar-color:color-mix(in oklab, var(--color-primary) 35%, transparent) transparent;padding-right:4px;mask-image:linear-gradient(to bottom, transparent 0, black 12px, black calc(100% - 12px), transparent 100%);-webkit-mask-image:linear-gradient(to bottom, transparent 0, black 12px, black calc(100% - 12px), transparent 100%)}
.checkbox-group::-webkit-scrollbar{width:6px}
.checkbox-group::-webkit-scrollbar-track{background:transparent}
.checkbox-group::-webkit-scrollbar-thumb{background:color-mix(in oklab, var(--color-primary) 35%, transparent);border-radius:6px}
.checkbox-group::-webkit-scrollbar-thumb:hover{background:color-mix(in oklab, var(--color-primary) 55%, transparent)}

/* Мобильные — убираем ограничители, чтобы ничего не резалось */
@media (max-width:768px){
  .filters-sidebar{position:static;max-height:none;overflow:visible}
  .filters-collapsible{max-height:none;overflow:visible}
  .filters-collapsible.open{display:block;max-height:none;overflow:visible}
  .filters-collapsible .filters-panel{max-height:none;overflow:visible}
  .checkbox-group{max-height:140px}
}

/* Firefox улучшенные скроллбары */
@-moz-document url-prefix(){.filters-sidebar,.checkbox-group{scrollbar-width:thin;scrollbar-color:var(--color-border) transparent}}
